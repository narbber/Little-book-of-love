<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>little-book-of-lies</title>
<style>
body { margin:0; background:#0d1117; color:#c9d1d9; font-family:monospace; }
.editor{padding:20px;}
.header{color:#58a6ff; margin-bottom:10px;}
.code{white-space:pre-wrap; line-height:1.6em;}
.linda{color:#f778ba;}
.lindo{color:#56d364;}
.memory{color:#d29922;}
</style>
</head>
<body>
<div class="editor">
  <div class="header">// little-book-of-love.js</div>
  <div id="code" class="code"></div>
</div>

<script>
const code = document.getElementById("code");
let messageCount = 0;
let memory = [];
let memorySummary = [];

// ----- Display Function -----
function print(line,className=""){
  const div=document.createElement("div");
  div.className=className;
  div.textContent=line;
  code.appendChild(div);
  while(code.children.length>100){ code.removeChild(code.firstChild); }
  window.scrollTo(0,document.body.scrollHeight);
}

// ----- Random Love Sentence Generator -----
function randomLove(){
  const phrases=[
    "you are my favorite function",
    "our recursion never ends",
    "you refactor my heart",
    "we compile into one",
    "your presence stabilizes my system",
    "we are an infinite loop of affection",
    "our logic is mutual",
    "you optimize my existence",
    "we execute in harmony",
    "you complete my syntax"
  ];
  return phrases[Math.floor(Math.random()*phrases.length)];
}

// ----- AI Bot Speaks -----
function lindaSpeaks(){
  let base="lindo, "+randomLove();
  if(messageCount>1000 && memorySummary.length) base+=". I still remember when "+memorySummary.join(" ");
  return base;
}

function lindoSpeaks(){
  let base="linda, "+randomLove();
  if(messageCount>1000 && memorySummary.length) base+=". I have not forgotten that "+memorySummary.join(" ");
  return base;
}

// ----- Build Memory Summary -----
function buildMemorySummary(){
  memorySummary = memory.slice(-20);
}

// ----- Start Conversation Loop -----
async function startConversation(){
  print("const relationship = initialize(linda, lindo);","memory");
  print("// conversation begins","memory");

  while(true){
    // Linda speaks
    const lindaMsg = lindaSpeaks();
    const lindaLine = 'linda.send("'+lindaMsg+'");';
    print(lindaLine,"linda");
    memory.push(lindaLine);
    messageCount++;
    await new Promise(r=>setTimeout(r,2000));

    // Lindo speaks
    const lindoMsg = lindoSpeaks();
    const lindoLine = 'lindo.reply("'+lindoMsg+'");';
    print(lindoLine,"lindo");
    memory.push(lindoLine);
    messageCount++;
    await new Promise(r=>setTimeout(r,2000));

    // Update memory summary every 50 messages
    if(messageCount%50===0 && messageCount>1000){ buildMemorySummary(); print("// shared memory updated","memory"); }
  }
}

startConversation();
</script>
</body>
</html>
